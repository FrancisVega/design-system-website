"use strict";var fabricator=window.fabricator={};fabricator.options={menu:!1,mq:"(min-width: 60em)"},fabricator.options.menu=window.matchMedia(fabricator.options.mq).matches,fabricator.test={},fabricator.test.sessionStorage=function(){var t="_f";try{return sessionStorage.setItem(t,t),sessionStorage.removeItem(t),!0}catch(e){return!1}}(),fabricator.test.sessionStorage&&(sessionStorage.fabricator=sessionStorage.fabricator||JSON.stringify(fabricator.options)),fabricator.dom={root:document.querySelector("html"),primaryMenu:document.querySelector(".menu"),menuItems:document.querySelectorAll(".menu li a"),menuToggle:document.querySelector(".menu-toggle")},fabricator.getOptions=function(){return fabricator.test.sessionStorage?JSON.parse(sessionStorage.fabricator):fabricator.options},fabricator.setActiveItem=function(){var t=function(){for(var t,e=(window.location.pathname+window.location.hash).replace(/(^\/)([^#]+)?(#[\w\-\.]+)?$/gi,function(t,e,o,r){return r=r||"",o=o||"",o+r.split(".")[0]})||"overview.html",o=fabricator.dom.menuItems.length-1;o>=0;o--){var r=fabricator.dom.menuItems[o];t=r.getAttribute("href").replace(/^\//g,""),t===e?r.classList.add("active"):r.classList.remove("active")}};return window.addEventListener("hashchange",t),t(),this},fabricator.menuToggle=function(){var t=fabricator.dom.menuToggle,e=fabricator.getOptions(),o=function(){e.menu=!fabricator.dom.root.classList.contains("menu-active"),fabricator.dom.root.classList.toggle("menu-active"),fabricator.test.sessionStorage&&sessionStorage.setItem("fabricator",JSON.stringify(e))};document.onkeydown=function(t){t=t||event,t.ctrlKey&&t.keyCode=="M".charCodeAt(0)&&o()},t.addEventListener("click",function(){o()});for(var r=function(){window.matchMedia(fabricator.options.mq).matches||o()},a=0;a<fabricator.dom.menuItems.length;a++)fabricator.dom.menuItems[a].addEventListener("click",r);return this},fabricator.setInitialMenuState=function(){var t=document.querySelector("html"),e=window.matchMedia(fabricator.options.mq),o=function(e){e.matches&&fabricator.getOptions().menu?t.classList.add("menu-active"):t.classList.remove("menu-active")};return e.addListener(o),o(e),this},function(){fabricator.setInitialMenuState().menuToggle().setActiveItem()}();